<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using the Announcement Shiny Module • periscope2</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using the Announcement Shiny Module">
<meta property="og:description" content="periscope2">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">periscope2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/announcement-module.html">Using the Announcement Shiny Module</a>
    </li>
    <li>
      <a href="../articles/applicationReset-module.html">Using the appReset Shiny Module</a>
    </li>
    <li>
      <a href="../articles/downloadFile-module.html">Using the downloadFile Shiny Module</a>
    </li>
    <li>
      <a href="../articles/downloadablePlot-module.html">Using the downloadablePlot Shiny Module</a>
    </li>
    <li>
      <a href="../articles/downloadableTable-module.html">Using the downloadableTable Shiny Module</a>
    </li>
    <li>
      <a href="../articles/logViewer-module.html">Using the logViewer Shiny Module</a>
    </li>
    <li>
      <a href="../articles/new-application.html">Creating a new framework-based application</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Aggregate-Genius/periscope2/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using the Announcement Shiny Module</h1>
                        <h4 data-toc-skip class="author">Mohammed
Ali</h4>
            
            <h4 data-toc-skip class="date">2023-05-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Aggregate-Genius/periscope2/blob/HEAD/vignettes/announcement-module.Rmd" class="external-link"><code>vignettes/announcement-module.Rmd</code></a></small>
      <div class="hidden name"><code>announcement-module.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<div class="section level3">
<h3 id="purpose">Purpose<a class="anchor" aria-label="anchor" href="#purpose"></a>
</h3>
<p>This <em>Shiny Module</em> was created in order to display
announcements for app users</p>
</div>
<div class="section level3">
<h3 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h3>
<ul>
<li>Announcements module aim to alert app user with customized admin
messages upon application start for predefined time.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="shiny-module-overview">Shiny Module Overview<a class="anchor" aria-label="anchor" href="#shiny-module-overview"></a>
</h3>
<p>Shiny modules consist of a pair of functions that modularize, or
package, a small piece of reusable functionality. The UI function is
called directly by the user to place the UI in the correct location (as
with other shiny UI objects). The module server function that is called
only once to set it up using the module name as a function inside the
server function (i.e. user-local session scope. The function first
arguments is string represents the module id (the same id used in module
UI function). Additional arguments can be supplied by the user based on
the specific shiny module that is called. There can be additional helper
functions that are a part of a shiny module.</p>
<p>The <strong>announcements</strong> Shiny Module is a part of the
<em>periscope2</em> package and consists of the following function:</p>
<ul>
<li>
<strong>load_announcements</strong> - a private function that parses
announcements configuration file and load announcements if any</li>
</ul>
</div>
<div class="section level3">
<h3 id="load_announcements">load_announcements<a class="anchor" aria-label="anchor" href="#load_announcements"></a>
</h3>
<ul>
<li>This function is private and configured in <em>server.R</em> and no
need to modify it</li>
<li>The function returns number of seconds in which an announcement
should stay in application header (default is 30s)</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Inside server.R</span></span>
<span></span>
<span>    <span class="va">announce_close_time</span> <span class="op">&lt;-</span> <span class="fu">periscope2</span><span class="fu">:::</span><span class="fu">load_announcements</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">announce_close_time</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu">shinyjs</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shinyjs/man/delay.html" class="external-link">delay</a></span><span class="op">(</span><span class="va">announce_close_time</span>,<span class="op">{</span></span>
<span>            <span class="fu">bs4Dash</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bs4Dash/man/alert.html" class="external-link">closeAlert</a></span><span class="op">(</span><span class="st">"announceAlert"</span><span class="op">)</span> </span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span></code></pre></div>
<ul>
<li>Announcements will be displayed in a banner in app header, in which
it will closed automatically.
<ul>
<li>If <code>auto_close</code> parameter in configuration file is blank,
the announcement will only be closed manually.</li>
</ul>
</li>
</ul>
<figure><center>
<img src="figures/announcements.jpg" width="600px">
</center>
<figcaption>
Announcements Bannar
</figcaption></figure>
</div>
<div class="section level3">
<h3 id="announcements-configuration-file">Announcements configuration file<a class="anchor" aria-label="anchor" href="#announcements-configuration-file"></a>
</h3>
<ul>
<li>Default configuration file name is <code>announce.yaml</code> and
located under <code>program\config</code> folder</li>
<li>If file does not exist or mis-configured, no announcements will be
loaded</li>
<li>File template has its own documentation to explain each parameter
possible value and how it can be used</li>
</ul>
<figure><center>
<img src="figures/announcements-conf.jpg" width="600px">
</center>
<figcaption>
Announcements Bannar
</figcaption></figure><ul>
<li>File location should be passed to <code>set_app_parameters</code>
function in <code>program\global.R</code>
</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Inside program\global.R</span></span>
<span></span>
<span><span class="fu"><a href="../reference/set_app_parameters.html">set_app_parameters</a></span><span class="op">(</span>title              <span class="op">=</span> <span class="st">"periscope Example Application"</span>,</span>
<span>                   app_info           <span class="op">=</span> <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/HTML.html" class="external-link">HTML</a></span><span class="op">(</span><span class="st">"Demonstrat periscope features and generated application layout"</span><span class="op">)</span>,</span>
<span>                   log_level          <span class="op">=</span> <span class="st">"DEBUG"</span>,</span>
<span>                   app_version        <span class="op">=</span> <span class="st">"1.0.0"</span>,</span>
<span>                   loading_indicator  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>html <span class="op">=</span> <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/tagList.html" class="external-link">tagList</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/waiter/man/spinners.html" class="external-link">spin_1</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"Loading ..."</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                   announcements_file <span class="op">=</span> <span class="st">"./program/config/announce.yaml"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="sample-application">Sample Application<a class="anchor" aria-label="anchor" href="#sample-application"></a>
</h3>
<p>For a complete running shiny example application using the
announcements module you can create and run a <em>periscope2</em> sample
application using:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Aggregate-Genius/periscope2" class="external-link">periscope2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">app_dir</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/create_application.html">create_application</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">'mysampleapp'</span>, location <span class="op">=</span> <span class="va">app_dir</span>, sample_app <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/runApp.html" class="external-link">runApp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">app_dir</span>, <span class="st">'mysampleapp'</span>, sep <span class="op">=</span> <span class="va">.Platform</span><span class="op">$</span><span class="va">file.sep</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
<p><strong>Vignettes</strong></p>
<ul>
<li><a href="new-application.html">New Application</a></li>
<li><a href="downloadableTable-module.html">downloadableTable
Module</a></li>
<li><a href="downloadablePlot-module.html">downloadablePlot
Module</a></li>
<li><a href="downloadFile-module.html">downloadFile Module</a></li>
<li><a href="logViewer-module.html">logViewer Module</a></li>
<li><a href="applicationReset-module.html">applicationReset
Module</a></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Mohammed Ali.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
